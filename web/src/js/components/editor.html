<div class="editor-container">
<div class="btn-toolbar hidden-xs {{ toolbar-class || 'editor-toolbar' }}">
	<div class="btn-group hidden-sm">
		<button type="button" class="btn btn-default btn-sm" title="Header 1" tabindex="-1" on-click="toolbar:'h1'">H1</button>
		<button type="button" class="btn btn-default btn-sm" title="Header 2" tabindex="-1" on-click="toolbar:'h2'">H2</button>
		<button type="button" class="btn btn-default btn-sm" title="Header 3" tabindex="-1" on-click="toolbar:'h3'">H3</button>
	</div>
	<div class="btn-group">
		<button type="button" class="btn btn-default btn-sm" title="bold" tabindex="-1" on-click="toolbar:'bold'">
			<span class="fa fa-bold"></span></button>
		<button type="button" class="btn btn-default btn-sm" title="italic" tabindex="-1" on-click="toolbar:'italic'">
			<span class="fa fa-italic"></span></button>
	</div>
	<div class="btn-group">
		<button type="button" class="btn btn-default btn-sm" title="Unordered List" tabindex="-1" on-click="toolbar:'ul'">
			<span class="fa fa-list-ul"></span></button>
		<button type="button" class="btn btn-default btn-sm" title="Ordered List" tabindex="-1" on-click="toolbar:'ol'">
			<span class="fa fa-list-ol"></span></button>
		<button type="button" class="btn btn-default btn-sm" title="Quote" tabindex="-1" on-click="toolbar:'quote'">
			<span class="fa fa-quote-right"></span></button>
	</div>

	<div id="links" class="btn-group dropdown">
		<button id="mdLink" type="button" class="btn btn-default btn-sm dd-anchor" title="Link" on-click="linkDropDown"
			tabindex="-1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
			<span class="fa fa-link"></span> <span class="caret"></span>
		</button>

		<ul class="dropdown-menu" aria-labelledby="mdLink">
			<li>
				<form class="form-inline" on-submit="toolbar:'link'">
					<input id="linkURL" type="text" class="form-control" placeholder="Enter URL" value="{{linkURL}}">
				</form>
			<li>
		</ul>

		<button type="button" class="btn btn-default btn-sm" title="Unlink" tabindex="-1" on-click="toolbar:'unlink'">
			<span class="fa fa-unlink"></span></button>
	</div>

	<div class="btn-group dropdown">
		<button type="button" id="emojiLink" class="btn btn-default btn-sm dropdown-toggle" title="emoticons and tags"
			tabindex="-1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" on-click="loadEmoji">
				<span class="fa fa-smile-o"></span> <span class="caret"></span>
		</button>
		<ul class="emoji-menu dropdown-menu dropdown-menu-right" aria-labelledby="emojiLink">
			<li>
				{{>emojiList}}
			</li>
		</ul>
	</div>

	<div class="btn-group dropdown hidden-sm">
		<button type="button" id="help" class="btn btn-default btn-sm dropdown-toggle" title="help"
			tabindex="-1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
				<span class="fa fa-question"></span> <span class="caret"></span>
		</button>
		<ul class="help-menu dropdown-menu dropdown-menu-right" aria-labelledby="help">
			<li>
				<strong>You can use:</strong>
				<ul>
					<li>Markdown 
						<a href="http://commonmark.org" on-click="link:'http://commonmark.org'" tabindex="-1">
							<span class="fa fa-question-circle"></span>
						</a>
					</li>
					<li><code>@username</code> to mention a specific user</li>
					<li><code>$price</code> to specify a price for your comment or post.  Multiple prices can be used. 
					i.e. <a href="#" title="price - ">$30 - $40</a></li>
					<li><code>/town/townname</code> to link to a town</li>
					<li>
						<a href="http://emoji.codes/" on-click="link:'http://emoji.codes/'" tabindex="-1">
						emoji codes</a>  <code>:smile_cat:</code></li>
				</ul>
			</li>
		</ul>
	</div>

</div>
<textarea id="{{id}}" class="{{class}} editor" tabindex="1" decorator="editor" value="{{input}}"
	on-focus="focusEditor" on-blur="blurEditor" on-keydown="keydown">
</textarea>
</div>

{{#partial emojiList}}
<span class="emoji-buttons">
	<div class="btn-group-vertical">
		<button type="button" class="btn btn-sm btn-{{#if ecat == 'search'}}primary{{else}}default{{/if}} tooltipped tooltipped-w" 
			aria-label="Search" on-click="eSearch">
			<span class="fa fa-search"></span>
		</button>
		<button type="button" class="btn btn-sm btn-{{#if ecat == 'people'}}primary{{else}}default{{/if}} tooltipped tooltipped-w" 
			aria-label="People" on-click="emojiCat:'people'">
			<span class="fa fa-smile-o"></span>
		</button>
		<button type="button" class="btn btn-sm btn-{{#if ecat == 'tags'}}primary{{else}}default{{/if}} tooltipped tooltipped-w" 
			aria-label="Tags" on-click="emojiCat:'tags'">
			<span class="fa fa-tags"></span>
		</button>
		<button type="button" class="btn btn-sm btn-{{#if ecat == 'nature'}}primary{{else}}default{{/if}} tooltipped tooltipped-w" 
			aria-label="Nature" on-click="emojiCat:'nature'">
			<span class="fa fa-tree"></span>
		</button>
		<button type="button" class="btn btn-sm btn-{{#if ecat == 'food'}}primary{{else}}default{{/if}} tooltipped tooltipped-w" 
			aria-label="Food" on-click="emojiCat:'food'">
			<span class="fa fa-cutlery"></span>
		</button>
		<button type="button" class="btn btn-sm btn-{{#if ecat == 'activity'}}primary{{else}}default{{/if}} tooltipped tooltipped-w" 
			aria-label="Activity" on-click="emojiCat:'activity'">
			<span class="fa fa-futbol-o"></span>
		</button>
		<button type="button" class="btn btn-sm btn-{{#if ecat == 'travel'}}primary{{else}}default{{/if}} tooltipped tooltipped-w" 
			aria-label="Travel" on-click="emojiCat:'travel'">
			<span class="fa fa-globe"></span>
		</button>
		<button type="button" class="btn btn-sm btn-{{#if ecat == 'flags'}}primary{{else}}default{{/if}} tooltipped tooltipped-w" 
			aria-label="Flags" on-click="emojiCat:'flags'">
			<span class="fa fa-flag"></span>
		</button>
		<button type="button" class="btn btn-sm btn-{{#if ecat == 'objects'}}primary{{else}}default{{/if}} tooltipped tooltipped-w" 
			aria-label="Objects" on-click="emojiCat:'objects'">
			<span class="fa fa-cube"></span>
		</button>
		<button type="button" class="btn btn-sm btn-{{#if ecat == 'symbols'}}primary{{else}}default{{/if}} tooltipped tooltipped-w" 
			aria-label="Symbols" on-click="emojiCat:'symbols'">
			<span class="fa fa-heart"></span>
		</button>
	</div>
</span>
<span class="emoji-list">
	{{#if ecat === "search"}}
		<input id="emojiSearch" type="text" class="form-control" placeholder="Search by keyword" value="{{emojiSearch}}" 	
			on-keyup="searchEmoji">
	{{/if}}

	{{#emojiList:i}}
		{{#if .img}}
			<button type="button" class="btn btn-link emoji-btn" on-click="selectEmoji" title="{{.shortname}}">
				<img class="emoji-select" src="/images/emoji/png/{{.img}}.png">
			</button>
		{{else}}
			<button type="button" class="btn btn-link emoji-btn" on-click="selectTag" title="{{.name}}">
				<img class="emoji-select emoji-tag" src="/images/tags/{{.tag}}.png">
			</button>
		{{/if}}
	{{/emojiList}}
</span>



{{/partial}}
<style>
	@import "components.less";

	.editor-container {
		position: relative;
	}

	.emoji-menu {
		padding: 1px;
		width: 263px;
	}	

	.emoji-list {
		width: 85%;
		float: right;	
		max-height: 291px;
		padding-left: 1px;
		overflow-y: auto;	
	}
	.emoji-btn {
		padding: 0px;
		border-width: 0px;
	}

	img.emoji-select {
		height: 40px;
		padding: 1px;

		border: 5px solid transparent;
    border-radius: @border-radius-base;
	}

	.emoji-btn:hover img.emoji-select.emoji-tag {
		padding: 1px;
		background-color: #eee;
		border: 5px solid #eee;
	}

	.emoji-btn:hover img.emoji-select {
    border: 3px solid #eee;
    border-radius: @border-radius-base;
	}

	.editor-toolbar {
		position: absolute;
		top: -37px;
		right: 0px;
	}

	.editor {
		overflow-y: auto;	
		min-height: 300px;
		max-width: 100%;
		border-top-left-radius: 0px;
		border-top-right-radius: 0px;
		border-top-width: 0px;
		box-shadow: 0px 0px 0px; 
	}

	.btn-group.dropdown > .btn.dd-anchor {
		margin-right: -1px;
	}

	.dropdown-menu > li > form > input.form-control {
		margin-left: 5px;
		margin-right: 5px;
	}

	.help-menu {
		width: 400px;
		padding: 15px;
	}

</style>
<script>
import Editor from "./js/editor";
import "../lib/bootstrap/dropdown";

component.exports = Editor;
</script>
